<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@JoshBotDotJs"/><meta name="twitter:creator" content="@josh412"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Code Meadow"/><title>Upload Files To Github Release With Actions | Code Meadow</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="At Saturday Drive, we recently migrated from Gitlab to Github. While we were setting up the Github actions for CI, we decidied to improve our process for generating ZIP files of our [[wordpress]] plugins. The goal was to make this process c"/><meta property="og:title" content="Upload Files To Github Release With Actions"/><meta property="og:description" content="Notes about Upload Files To Github Release With Actions by Josh Pollock"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/d775fab888e97a088f8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d775fab888e97a088f8d.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-6af9946a2519c79c69af.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.0aee811b7a2ba0b587bf.js" as="script"/><link rel="preload" href="/_next/static/chunks/eeb0540607e8d823f414da745296801d6a447ba7.481ce1df83e29fdab985.js" as="script"/><link rel="preload" href="/_next/static/chunks/e9acf14add5c4f122717233c5b8bc320320f96b1.af08081eb2a8a0707206.js" as="script"/><link rel="preload" href="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.a6e4cceaacf75dd96edb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-737febf5088f37bd4af8.js" as="script"/><link rel="preload" href="/_next/static/chunks/cf2f3e6cb2c7250386e9cd655729b7b20c55eb51.c4fc838959c470884ff9.js" as="script"/><link rel="preload" href="/_next/static/chunks/65446de8fdf4c7aed854cb7642630d677689ed10.ceba6928f5d73cccb595.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/notes/%5Bslug%5D-cc63db50d5065760d96a.js" as="script"/></head><body><div id="__next"><div class="layout"><header id="header" role="banner"><a aria-current="page" class="" href="/"><span>Code Meadow</span></a><div class="controls"><button title="Show Graph Visualization" aria-label="Show Graph Visualization" class="graph-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" class="graph-closed"><g fill="none" stroke-width="2"><circle cx="11.733" cy="3.181" r="1.902"></circle><circle cx="16.864" cy="10.861" r="1.902"></circle><circle cx="7.47" cy="16.822" r="1.902"></circle><circle cx="3.046" cy="6.275" r="1.902"></circle><circle cx="9.372" cy="10.861" r="1.902"></circle><line x1="11.635" x2="14.655" y1="10.861" y2="10.861"></line><line x1="10" x2="10.895" y1="8.959" y2="5.573"></line><line x1="7.47" x2="4.5" y1="9.68" y2="7.5"></line><line x1="8.25" x2="8.809" y1="14.92" y2="13.088"></line></g></svg></button><label class="dark-mode-toggle" aria-label="Activate dark mode" title="Activate dark mode"><input type="checkbox" checked=""/><div></div></label></div></header><main><div class="note-columns-scrolling-container"><div class="note-columns-container"><div class="note-container note-open note-focus visible note-position-one"><div class="note-buttons"></div><div id="" class="note-content"><h1 class="animate-pulse">Upload Files To Github Release With Actions</h1><div class="prose note-markdown"><p class="mb-4"> <!-- -->At Saturday Drive, we recently migrated from Gitlab to Github. While we were setting up the Github actions for CI, we decidied to improve our process for generating ZIP files of our <a href="/notes/wordpress">wordpress</a> plugins. The goal was to make this process constent. We also wanted to make it easier for non-engineers to test works in progress. So part of the goal was to make it so anyone with permissions could create a release of a plugin from Github&#x27;s UI, wait a few minutes and then be able to download an optimized ZIP file of any branch. The process to make this ZIP will be the same for beta testing, and buildign final release files for WordPress.org or our eCommerce sites. These optimzied zips only have the files needed to run the plugins, with development dependencies, configuration files and unminifinied JavaScript and tests removed. This is a process we have documented, that can be run at the command line if all neccasary software is installed.</p>
<h2 class="mb-4"> <!-- -->Useful Documentation Links</h2>
<ul class="mb-4 list-inside list-disc">
<li>ttps://docs.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables</li>
</ul>
<h2 class="mb-4"> <!-- -->Options</h2>
<ul class="mb-4 list-inside list-disc">
<li>https://github.com/marketplace/actions/upload-assets-to-a-release</li>
<li>https://github.com/marketplace/actions/github-release-create-update-and-upload-assets</li>
<li>https://github.com/marketplace/actions/upload-files-to-a-github-release Check mark emoji</li>
</ul>
<h2 class="mb-4"> <!-- -->Respect For Grunt First</h2>
<p class="mb-4"> <!-- -->I was very tempted to use my favorite JavaScript task runner: Grunt. Why? It works. The WordPress plugin I&#x27;m testing with was generated with WP-CLI, and that incluses a grunt file.</p>
<p class="mb-4"> <!-- -->When I was at Pods and starting CalderaWP we created a Grunt build script that&#x27;s still being used all over Caldera stuff via copypasta and it works.</p>
<p class="mb-4"> <!-- -->Anyway, respect for an old friend. Back to convincining the cloud to do what we want for us.</p>
<h2 class="mb-4"> <!-- -->Attempt One</h2>
<p class="mb-4"> <a href="https://github.com/Shelob9/actions-test/blob/46f011fcba61e6064beaeb407ef9e04bb3c663de/.github/workflows/zip.yml">My first attempt</a> was a pretty good learning experience. It didn&#x27;t work. I forked <a href="https://github.com/10up/action-wordpress-plugin-deploy">10up&#x27;s scn deploy action</a> and tried to only use it to build the ZIP and do the upload.</p>
<p class="mb-4"> <!-- -->The deploy action uses a .distignore file. I liked the idea of a root-level file that says what NOT to include in the ZIP file. This format uses same syntax as .gitignore. It is also compatible with the WP CLI create archive command. Not sure why I never used that.</p>
<h2 class="mb-4"> <!-- -->Attempt Two</h2>
<p class="mb-4"> <!-- -->Plan for two orgininally was to use these two actions:</p>
<ul class="mb-4 list-inside list-disc">
<li><a href="https://github.com/marketplace/actions/create-zip-file">For ZIPing</a></li>
<li><a href="https://github.com/marketplace/actions/upload-files-to-a-github-release">For upload</a></li>
</ul>
<p class="mb-4"> <a href="https://github.com/marketplace/actions/easy-zip-files">Then I found the simplest option for zipping files and adding them as artifacts</a>, but did not support using a distignore file. But, if the plugin has a build script that generates a directory to be ZIPed -- for example Caldera Forms or the Saturday Drive monorepo, this was most of what we needed.</p>
<p class="mb-4"> <!-- -->That ZIP action adds an artifact to the workflow run, not the release. So we used the <a href="https://github.com/marketplace/actions/upload-files-to-a-github-release">upload action</a> to upload files to each relase.</p>
<p class="mb-4"> <!-- -->Here is the pull request: https://github.com/CalderaWP/Caldera-Forms/pull/3591</p></div></div></div><div class="note-container note-closed  invisible note-position-two"><div id="" class="note-content"></div></div><div class="note-container note-closed  invisible note-position-three"><div id="" class="note-content"></div></div></div></div></main><footer class="bg-white dark:bg-gray-300 border-t border-gray-500 shadow"><div class="container mx-auto flex py-8"><div class="w-full mx-auto flex flex-wrap"><div class="flex w-full lg:w-1/2 "><div class="px-8"><h3 class="font-bold text-gray-900"><a href="/about">About</a></h3><p class="py-4 text-gray-600 text-sm">By <!-- -->Josh Pollock<!-- -->. Built with <a href="https://digitalgardenbuilder.app/" target="_blank" rel="noopener noreferrer">Digital Garden Builder</a></p></div></div><div class="flex w-full lg:w-1/2 lg:justify-end lg:text-right"><div class="px-8"><h3 class="font-bold text-gray-900">Social</h3><ul class="list-reset items-center text-sm pt-3"><li><a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:underline py-1" href="https://twitter.com/@josh412">Twitter</a></li></ul></div></div><div class="flex w-full lg:justify-end lg:text-right"></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"title":"Upload Files To Github Release With Actions","content":"At Saturday Drive, we recently migrated from Gitlab to Github. While we were setting up the Github actions for CI, we decidied to improve our process for generating ZIP files of our [[wordpress]] plugins. The goal was to make this process constent. We also wanted to make it easier for non-engineers to test works in progress. So part of the goal was to make it so anyone with permissions could create a release of a plugin from Github's UI, wait a few minutes and then be able to download an optimized ZIP file of any branch. The process to make this ZIP will be the same for beta testing, and buildign final release files for WordPress.org or our eCommerce sites. These optimzied zips only have the files needed to run the plugins, with development dependencies, configuration files and unminifinied JavaScript and tests removed. This is a process we have documented, that can be run at the command line if all neccasary software is installed.\r\n\r\n## Useful Documentation Links\r\n\r\n- ttps://docs.github.com/en/actions/configuring-and-managing-workflows/using-environment-variables\r\n\r\n## Options\r\n\r\n- https://github.com/marketplace/actions/upload-assets-to-a-release\r\n- https://github.com/marketplace/actions/github-release-create-update-and-upload-assets\r\n- https://github.com/marketplace/actions/upload-files-to-a-github-release Check mark emoji\r\n\r\n## Respect For Grunt First\r\n\r\nI was very tempted to use my favorite JavaScript task runner: Grunt. Why? It works. The WordPress plugin I'm testing with was generated with WP-CLI, and that incluses a grunt file.\r\n\r\nWhen I was at Pods and starting CalderaWP we created a Grunt build script that's still being used all over Caldera stuff via copypasta and it works.\r\n\r\nAnyway, respect for an old friend. Back to convincining the cloud to do what we want for us.\r\n\r\n## Attempt One\r\n\r\n[My first attempt](https://github.com/Shelob9/actions-test/blob/46f011fcba61e6064beaeb407ef9e04bb3c663de/.github/workflows/zip.yml) was a pretty good learning experience. It didn't work. I forked [10up's scn deploy action](https://github.com/10up/action-wordpress-plugin-deploy) and tried to only use it to build the ZIP and do the upload.\r\n\r\nThe deploy action uses a .distignore file. I liked the idea of a root-level file that says what NOT to include in the ZIP file. This format uses same syntax as .gitignore. It is also compatible with the WP CLI create archive command. Not sure why I never used that.\r\n\r\n## Attempt Two\r\n\r\nPlan for two orgininally was to use these two actions:\r\n\r\n- [For ZIPing](https://github.com/marketplace/actions/create-zip-file)\r\n- [For upload](https://github.com/marketplace/actions/upload-files-to-a-github-release)\r\n\r\n[Then I found the simplest option for zipping files and adding them as artifacts](https://github.com/marketplace/actions/easy-zip-files), but did not support using a distignore file. But, if the plugin has a build script that generates a directory to be ZIPed -- for example Caldera Forms or the Saturday Drive monorepo, this was most of what we needed.\r\n\r\nThat ZIP action adds an artifact to the workflow run, not the release. So we used the [upload action](https://github.com/marketplace/actions/upload-files-to-a-github-release) to upload files to each relase.\r\n\r\nHere is the pull request: https://github.com/CalderaWP/Caldera-Forms/pull/3591\r\n","slug":"gh-actions-upload-files-to-releases","references":[{"slug":"wordpress","url":"/notes/wordpress"}]},"slug":"gh-actions-upload-files-to-releases"},"__N_SSG":true},"page":"/notes/[slug]","query":{"slug":"gh-actions-upload-files-to-releases"},"buildId":"LvmER_-FW4zienYIal0e1","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-695197e122f3a846e5cd.js"></script><script src="/_next/static/chunks/main-6af9946a2519c79c69af.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.0aee811b7a2ba0b587bf.js" async=""></script><script src="/_next/static/chunks/eeb0540607e8d823f414da745296801d6a447ba7.481ce1df83e29fdab985.js" async=""></script><script src="/_next/static/chunks/e9acf14add5c4f122717233c5b8bc320320f96b1.af08081eb2a8a0707206.js" async=""></script><script src="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.a6e4cceaacf75dd96edb.js" async=""></script><script src="/_next/static/chunks/pages/_app-737febf5088f37bd4af8.js" async=""></script><script src="/_next/static/chunks/cf2f3e6cb2c7250386e9cd655729b7b20c55eb51.c4fc838959c470884ff9.js" async=""></script><script src="/_next/static/chunks/65446de8fdf4c7aed854cb7642630d677689ed10.ceba6928f5d73cccb595.js" async=""></script><script src="/_next/static/chunks/pages/notes/%5Bslug%5D-cc63db50d5065760d96a.js" async=""></script><script src="/_next/static/LvmER_-FW4zienYIal0e1/_buildManifest.js" async=""></script><script src="/_next/static/LvmER_-FW4zienYIal0e1/_ssgManifest.js" async=""></script></body></html>