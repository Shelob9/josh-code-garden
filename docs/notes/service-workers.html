<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Code Meadow | Code Meadow</title><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@JoshBotDotJs"/><meta name="twitter:creator" content="@josh412"/><meta property="og:type" content="website"/><meta property="og:title" content="Code Meadow | Code Meadow"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Code Meadow"/><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="--- 
title: Service Workers
slug: service-workers
---

- [web.dev](https://developers.google.com/web/fundamentals/primers/service-workers)
- [mdn](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers)

#"/><meta property="og:description" content="Notes about undefined by Josh Pollock"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/d775fab888e97a088f8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d775fab888e97a088f8d.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-6af9946a2519c79c69af.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.0aee811b7a2ba0b587bf.js" as="script"/><link rel="preload" href="/_next/static/chunks/eeb0540607e8d823f414da745296801d6a447ba7.481ce1df83e29fdab985.js" as="script"/><link rel="preload" href="/_next/static/chunks/e9acf14add5c4f122717233c5b8bc320320f96b1.af08081eb2a8a0707206.js" as="script"/><link rel="preload" href="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.a6e4cceaacf75dd96edb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-737febf5088f37bd4af8.js" as="script"/><link rel="preload" href="/_next/static/chunks/cf2f3e6cb2c7250386e9cd655729b7b20c55eb51.c4fc838959c470884ff9.js" as="script"/><link rel="preload" href="/_next/static/chunks/65446de8fdf4c7aed854cb7642630d677689ed10.ac9293b36ba061acc35f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/notes/%5Bslug%5D-cc63db50d5065760d96a.js" as="script"/></head><body><div id="__next"><div class="layout"><header id="header" role="banner"><a aria-current="page" class="" href="/"><span>Code Meadow</span></a><div class="controls"><button title="Show Graph Visualization" aria-label="Show Graph Visualization" class="graph-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" class="graph-closed"><g fill="none" stroke-width="2"><circle cx="11.733" cy="3.181" r="1.902"></circle><circle cx="16.864" cy="10.861" r="1.902"></circle><circle cx="7.47" cy="16.822" r="1.902"></circle><circle cx="3.046" cy="6.275" r="1.902"></circle><circle cx="9.372" cy="10.861" r="1.902"></circle><line x1="11.635" x2="14.655" y1="10.861" y2="10.861"></line><line x1="10" x2="10.895" y1="8.959" y2="5.573"></line><line x1="7.47" x2="4.5" y1="9.68" y2="7.5"></line><line x1="8.25" x2="8.809" y1="14.92" y2="13.088"></line></g></svg></button><label class="dark-mode-toggle" aria-label="Activate dark mode" title="Activate dark mode"><input type="checkbox" checked=""/><div></div></label></div></header><main><div class="note-columns-scrolling-container"><div class="note-columns-container"><div class="note-container note-open note-focus visible note-position-one"><div class="note-buttons"></div><div id="" class="note-content"><h1 class="animate-pulse"></h1><div class="prose note-markdown"><hr/>
<h2 class="mb-4"> <!-- -->title: Service Workers
slug: service-workers</h2>
<ul class="mb-4 list-inside list-disc">
<li><a href="https://developers.google.com/web/fundamentals/primers/service-workers">web.dev</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers">mdn</a></li>
</ul>
<h2 class="mb-4"> <!-- -->Register Service Workers</h2>
<pre><code>if {
	undefined !== window &amp;&amp;
		window.navigator.serviceWorker
			.register(&quot;./sw.js&quot;, { scope: &quot;.&quot; })
			.then((reg) =&gt; {
				// registration worked
				console.log(&quot;Registration succeeded. Scope is &quot; + reg.scope);
			})
			.catch((error) =&gt; {
				// registration failed
				console.log(&quot;Registration failed with &quot; + error);
			});
}
</code></pre>
<h2 class="mb-4"> <!-- -->Log requests with service worker</h2>
<pre><code>self.addEventListener(&quot;install&quot;, function (event) {
	console.log(&quot;Sevice worker installed&quot;);
});

self.addEventListener(&quot;fetch&quot;, (event) =&gt; {
	console.log(event.request.method, event.request.url);
	event.respondWith(fetch(event.request));
});
</code></pre>
<h2 class="mb-4"> <!-- -->Proxy Specific Requests With Service Workers</h2>
<pre><code>self.addEventListener(&quot;fetch&quot;, (event) =&gt; {
const { url, method } = event.request;
//Does the URL match? But only for get
if (url.includes(&quot;/api/whatever&quot;) &amp;&amp; &#x27;GET&#x27; === method ) {
event.respondWith(
new Response(
//JSON encoded object
//Could be string,blob,redirect,etc
JSON.stringify({
hi: &#x27;Roy&#x27;
}),
{
//Set additional headers
headers: {
//Send JSON content type headers
&quot;Content-Type&quot;: &quot;text/json&quot;
},
}
)
);
} else {
//No match? Send to network
event.respondWith(fetch(event.request));
}
});
</code></pre></div></div></div><div class="note-container note-closed  invisible note-position-two"><div id="" class="note-content"></div></div><div class="note-container note-closed  invisible note-position-three"><div id="" class="note-content"></div></div></div></div></main><footer class="bg-white dark:bg-gray-300 border-t border-gray-500 shadow"><div class="container mx-auto flex py-8"><div class="w-full mx-auto flex flex-wrap"><div class="flex w-full lg:w-1/2 "><div class="px-8"><h3 class="font-bold text-gray-900"><a href="/about">About</a></h3><p class="py-4 text-gray-600 text-sm">By <!-- -->Josh Pollock<!-- -->. Built with <a href="https://digitalgardenbuilder.app/" target="_blank" rel="noopener noreferrer">Digital Garden Builder</a></p></div></div><div class="flex w-full lg:w-1/2 lg:justify-end lg:text-right"><div class="px-8"><h3 class="font-bold text-gray-900">Social</h3><ul class="list-reset items-center text-sm pt-3"><li><a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:underline py-1" href="https://twitter.com/@josh412">Twitter</a></li></ul></div></div><div class="flex w-full lg:justify-end lg:text-right"></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"content":"--- \ntitle: Service Workers\nslug: service-workers\n---\n\n- [web.dev](https://developers.google.com/web/fundamentals/primers/service-workers)\n- [mdn](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers)\n\n## Register Service Workers\n\n```js\nif {\n\tundefined !== window \u0026\u0026\n\t\twindow.navigator.serviceWorker\n\t\t\t.register(\"./sw.js\", { scope: \".\" })\n\t\t\t.then((reg) =\u003e {\n\t\t\t\t// registration worked\n\t\t\t\tconsole.log(\"Registration succeeded. Scope is \" + reg.scope);\n\t\t\t})\n\t\t\t.catch((error) =\u003e {\n\t\t\t\t// registration failed\n\t\t\t\tconsole.log(\"Registration failed with \" + error);\n\t\t\t});\n}\n```\n\n## Log requests with service worker\n\n```js\nself.addEventListener(\"install\", function (event) {\n\tconsole.log(\"Sevice worker installed\");\n});\n\nself.addEventListener(\"fetch\", (event) =\u003e {\n\tconsole.log(event.request.method, event.request.url);\n\tevent.respondWith(fetch(event.request));\n});\n```\n\n## Proxy Specific Requests With Service Workers\n\n```js\nself.addEventListener(\"fetch\", (event) =\u003e {\nconst { url, method } = event.request;\n//Does the URL match? But only for get\nif (url.includes(\"/api/whatever\") \u0026\u0026 'GET' === method ) {\nevent.respondWith(\nnew Response(\n//JSON encoded object\n//Could be string,blob,redirect,etc\nJSON.stringify({\nhi: 'Roy'\n}),\n{\n//Set additional headers\nheaders: {\n//Send JSON content type headers\n\"Content-Type\": \"text/json\"\n},\n}\n)\n);\n} else {\n//No match? Send to network\nevent.respondWith(fetch(event.request));\n}\n});\n```\n","slug":"service-workers","references":[]},"slug":"service-workers"},"__N_SSG":true},"page":"/notes/[slug]","query":{"slug":"service-workers"},"buildId":"ZHk_L2PKp8Dgbx_W2FCLq","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-695197e122f3a846e5cd.js"></script><script src="/_next/static/chunks/main-6af9946a2519c79c69af.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.0aee811b7a2ba0b587bf.js" async=""></script><script src="/_next/static/chunks/eeb0540607e8d823f414da745296801d6a447ba7.481ce1df83e29fdab985.js" async=""></script><script src="/_next/static/chunks/e9acf14add5c4f122717233c5b8bc320320f96b1.af08081eb2a8a0707206.js" async=""></script><script src="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.a6e4cceaacf75dd96edb.js" async=""></script><script src="/_next/static/chunks/pages/_app-737febf5088f37bd4af8.js" async=""></script><script src="/_next/static/chunks/cf2f3e6cb2c7250386e9cd655729b7b20c55eb51.c4fc838959c470884ff9.js" async=""></script><script src="/_next/static/chunks/65446de8fdf4c7aed854cb7642630d677689ed10.ac9293b36ba061acc35f.js" async=""></script><script src="/_next/static/chunks/pages/notes/%5Bslug%5D-cc63db50d5065760d96a.js" async=""></script><script src="/_next/static/ZHk_L2PKp8Dgbx_W2FCLq/_buildManifest.js" async=""></script><script src="/_next/static/ZHk_L2PKp8Dgbx_W2FCLq/_ssgManifest.js" async=""></script></body></html>