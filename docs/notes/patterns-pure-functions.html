<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@JoshBotDotJs"/><meta name="twitter:creator" content="@josh412"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:site_name" content="Code Meadow"/><title>Pure Functions | Code Meadow</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="## What Are They

A &quot;pure&quot; function is one that, given perdicatable inputs will produce perdictable outputs with no side effects. For example:

## Examples

```js
function add(firstNumber, secondNumber) {
	return firstNumber + secon"/><meta property="og:title" content="Pure Functions"/><meta property="og:description" content="Notes about Pure Functions by Josh Pollock"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/d775fab888e97a088f8d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d775fab888e97a088f8d.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-6af9946a2519c79c69af.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.0aee811b7a2ba0b587bf.js" as="script"/><link rel="preload" href="/_next/static/chunks/eeb0540607e8d823f414da745296801d6a447ba7.481ce1df83e29fdab985.js" as="script"/><link rel="preload" href="/_next/static/chunks/e9acf14add5c4f122717233c5b8bc320320f96b1.af08081eb2a8a0707206.js" as="script"/><link rel="preload" href="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.a6e4cceaacf75dd96edb.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-737febf5088f37bd4af8.js" as="script"/><link rel="preload" href="/_next/static/chunks/cf2f3e6cb2c7250386e9cd655729b7b20c55eb51.c4fc838959c470884ff9.js" as="script"/><link rel="preload" href="/_next/static/chunks/65446de8fdf4c7aed854cb7642630d677689ed10.ac9293b36ba061acc35f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/notes/%5Bslug%5D-cc63db50d5065760d96a.js" as="script"/></head><body><div id="__next"><div class="layout"><header id="header" role="banner"><a aria-current="page" class="" href="/"><span>Code Meadow</span></a><div class="controls"><button title="Show Graph Visualization" aria-label="Show Graph Visualization" class="graph-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" class="graph-closed"><g fill="none" stroke-width="2"><circle cx="11.733" cy="3.181" r="1.902"></circle><circle cx="16.864" cy="10.861" r="1.902"></circle><circle cx="7.47" cy="16.822" r="1.902"></circle><circle cx="3.046" cy="6.275" r="1.902"></circle><circle cx="9.372" cy="10.861" r="1.902"></circle><line x1="11.635" x2="14.655" y1="10.861" y2="10.861"></line><line x1="10" x2="10.895" y1="8.959" y2="5.573"></line><line x1="7.47" x2="4.5" y1="9.68" y2="7.5"></line><line x1="8.25" x2="8.809" y1="14.92" y2="13.088"></line></g></svg></button><label class="dark-mode-toggle" aria-label="Activate dark mode" title="Activate dark mode"><input type="checkbox" checked=""/><div></div></label></div></header><main><div class="note-columns-scrolling-container"><div class="note-columns-container"><div class="note-container note-open note-focus visible note-position-one"><div class="note-buttons"></div><div id="" class="note-content"><h1 class="animate-pulse">Pure Functions</h1><div class="prose note-markdown"><h2 class="mb-4"> <!-- -->What Are They</h2>
<p class="mb-4"> <!-- -->A &quot;pure&quot; function is one that, given perdicatable inputs will produce perdictable outputs with no side effects. For example:</p>
<h2 class="mb-4"> <!-- -->Examples</h2>
<pre><code>function add(firstNumber, secondNumber) {
	return firstNumber + secondNumber;
}
</code></pre>
<p class="mb-4"> <!-- -->This function adds two numbers, and does nothing out side of its closure. It is pure. It has no side effects. It is very predictable. I can test it like this:</p>
<pre><code>it(&quot;Sums&quot;, () =&gt; expect(add(1, 2).toBe(3)));
</code></pre>
<h3 class="mb-4"> <!-- -->Side Effects</h3>
<p class="mb-4"> <!-- -->This function, adds two numbers and then uses jQuery to set the inner HTML of an element to the sum of the two numbers:</p>
<pre><code>function addAndDisplay(firstNumber, secondNumber) {
	const sum = firstNumber + secondNumber;
	jQuery(&quot;#sum&quot;).html(sum);
}
</code></pre>
<p class="mb-4"> <!-- -->This function is NOT pure, beacuse it has a side effect.</p>
<p class="mb-4"> <!-- -->The DOM modification is a side effect, it happens outside of the scope of this closure and effects other things. This would be less straight forward to test, do to the side effects.</p>
<h2 class="mb-4"> <!-- -->In React</h2>
<p class="mb-4"> <!-- -->In React, a functional component can be pure. This funciton, given the same &quot;title&quot; property will allways result in the same object:</p>
<pre><code>const ShowTitle({title}) =&gt; (
    &lt;div&gt;{title}&lt;/div&gt;
);
</code></pre>
<p class="mb-4"> <!-- -->On the other hand, if we have to fetch the title from a remote API, that&#x27;s a side effect. React has a &quot;useEffect&quot; hook for this:</p>
<pre><code>const ShowTitle({postId}) =&gt; {
    const [title,setTitle] = React.useState();
    React.useEffect(() =&gt; {
        fetch( `api/posts/${postId}`)
        .then(r =&gt; r.json())
        .then(r =&gt; setTitle(r.title))
    },
    //Rerun fetch when postId changes
    [postId]);
    if( title ){
        return (
            &lt;div&gt;{title}&lt;/div&gt;
        )
    }
    return (&lt;div&gt;Loading&lt;/div&gt;);
};
</code></pre>
<p class="mb-4"> <!-- -->Now that the side effect is in a hook, we have more control over when the effect runs and can more easily mock it.</p>
<h2 class="mb-4"> <!-- -->WordPress</h2>
<p class="mb-4"> <!-- -->WordPress has very weak encapsulation. For example, consider this:</p>
<pre><code>function saveNewItem($title){
    wp_insert_post([&#x27;post_title&#x27;=&gt; $title]);
}
</code></pre>
<p class="mb-4"> <!-- -->This looks simple, but wp_insert_post has filters in it which can change the functions behaviour. In addition, a MySQL database is involved.</p></div></div></div><div class="note-container note-closed  invisible note-position-two"><div id="" class="note-content"></div></div><div class="note-container note-closed  invisible note-position-three"><div id="" class="note-content"></div></div></div></div></main><footer class="bg-white dark:bg-gray-300 border-t border-gray-500 shadow"><div class="container mx-auto flex py-8"><div class="w-full mx-auto flex flex-wrap"><div class="flex w-full lg:w-1/2 "><div class="px-8"><h3 class="font-bold text-gray-900"><a href="/about">About</a></h3><p class="py-4 text-gray-600 text-sm">By <!-- -->Josh Pollock<!-- -->. Built with <a href="https://digitalgardenbuilder.app/" target="_blank" rel="noopener noreferrer">Digital Garden Builder</a></p></div></div><div class="flex w-full lg:w-1/2 lg:justify-end lg:text-right"><div class="px-8"><h3 class="font-bold text-gray-900">Social</h3><ul class="list-reset items-center text-sm pt-3"><li><a class="inline-block text-gray-600 no-underline hover:text-gray-900 hover:underline py-1" href="https://twitter.com/@josh412">Twitter</a></li></ul></div></div><div class="flex w-full lg:justify-end lg:text-right"></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"title":"Pure Functions","content":"## What Are They\r\n\r\nA \"pure\" function is one that, given perdicatable inputs will produce perdictable outputs with no side effects. For example:\r\n\r\n## Examples\r\n\r\n```js\r\nfunction add(firstNumber, secondNumber) {\r\n\treturn firstNumber + secondNumber;\r\n}\r\n```\r\n\r\nThis function adds two numbers, and does nothing out side of its closure. It is pure. It has no side effects. It is very predictable. I can test it like this:\r\n\r\n```js\r\nit(\"Sums\", () =\u003e expect(add(1, 2).toBe(3)));\r\n```\r\n\r\n### Side Effects\r\n\r\nThis function, adds two numbers and then uses jQuery to set the inner HTML of an element to the sum of the two numbers:\r\n\r\n```js\r\nfunction addAndDisplay(firstNumber, secondNumber) {\r\n\tconst sum = firstNumber + secondNumber;\r\n\tjQuery(\"#sum\").html(sum);\r\n}\r\n```\r\n\r\nThis function is NOT pure, beacuse it has a side effect.\r\n\r\nThe DOM modification is a side effect, it happens outside of the scope of this closure and effects other things. This would be less straight forward to test, do to the side effects.\r\n\r\n## In React\r\n\r\nIn React, a functional component can be pure. This funciton, given the same \"title\" property will allways result in the same object:\r\n\r\n```jsx\r\nconst ShowTitle({title}) =\u003e (\r\n    \u003cdiv\u003e{title}\u003c/div\u003e\r\n);\r\n```\r\n\r\nOn the other hand, if we have to fetch the title from a remote API, that's a side effect. React has a \"useEffect\" hook for this:\r\n\r\n```jsx\r\nconst ShowTitle({postId}) =\u003e {\r\n    const [title,setTitle] = React.useState();\r\n    React.useEffect(() =\u003e {\r\n        fetch( `api/posts/${postId}`)\r\n        .then(r =\u003e r.json())\r\n        .then(r =\u003e setTitle(r.title))\r\n    },\r\n    //Rerun fetch when postId changes\r\n    [postId]);\r\n    if( title ){\r\n        return (\r\n            \u003cdiv\u003e{title}\u003c/div\u003e\r\n        )\r\n    }\r\n    return (\u003cdiv\u003eLoading\u003c/div\u003e);\r\n};\r\n```\r\n\r\nNow that the side effect is in a hook, we have more control over when the effect runs and can more easily mock it.\r\n\r\n## WordPress\r\n\r\nWordPress has very weak encapsulation. For example, consider this:\r\n\r\n```php\r\nfunction saveNewItem($title){\r\n    wp_insert_post(['post_title'=\u003e $title]);\r\n}\r\n```\r\n\r\nThis looks simple, but wp_insert_post has filters in it which can change the functions behaviour. In addition, a MySQL database is involved.\r\n","slug":"patterns-pure-functions","references":[]},"slug":"patterns-pure-functions"},"__N_SSG":true},"page":"/notes/[slug]","query":{"slug":"patterns-pure-functions"},"buildId":"ZHk_L2PKp8Dgbx_W2FCLq","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-695197e122f3a846e5cd.js"></script><script src="/_next/static/chunks/main-6af9946a2519c79c69af.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.0aee811b7a2ba0b587bf.js" async=""></script><script src="/_next/static/chunks/eeb0540607e8d823f414da745296801d6a447ba7.481ce1df83e29fdab985.js" async=""></script><script src="/_next/static/chunks/e9acf14add5c4f122717233c5b8bc320320f96b1.af08081eb2a8a0707206.js" async=""></script><script src="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.a6e4cceaacf75dd96edb.js" async=""></script><script src="/_next/static/chunks/pages/_app-737febf5088f37bd4af8.js" async=""></script><script src="/_next/static/chunks/cf2f3e6cb2c7250386e9cd655729b7b20c55eb51.c4fc838959c470884ff9.js" async=""></script><script src="/_next/static/chunks/65446de8fdf4c7aed854cb7642630d677689ed10.ac9293b36ba061acc35f.js" async=""></script><script src="/_next/static/chunks/pages/notes/%5Bslug%5D-cc63db50d5065760d96a.js" async=""></script><script src="/_next/static/ZHk_L2PKp8Dgbx_W2FCLq/_buildManifest.js" async=""></script><script src="/_next/static/ZHk_L2PKp8Dgbx_W2FCLq/_ssgManifest.js" async=""></script></body></html>